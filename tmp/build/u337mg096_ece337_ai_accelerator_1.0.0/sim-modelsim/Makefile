#Generated by Edalize
ifndef MODEL_TECH
$(error Environment variable MODEL_TECH was not found. It should be set to <modelsim install path>/bin)
endif

CC ?= gcc
CFLAGS   := -fPIC -fno-stack-protector -g -std=c99
CXXFLAGS := -fPIC -fno-stack-protector -g

LD ?= ld
LDFLAGS := -shared -E

#Try to determine if ModelSim is 32- or 64-bit.
#To manually override, set the environment MTI_VCO_MODE to 32 or 64
ifeq ($(findstring 64, $(shell $(MODEL_TECH)/../vco)),)
CFLAGS   += -m32
CXXFLAGS += -m32
LDFLAGS  += -melf_i386
endif

RM ?= rm
INCS := -I$(MODEL_TECH)/../include

VSIM ?= $(MODEL_TECH)/vsim

<<<<<<< HEAD:tmp/build/u337mg096_ece337_ahb_sub_1.0.0/sim-modelsim/Makefile
TOPLEVEL      := tb_ahb_sub
VPI_MODULES   := 
PARAMETERS    ?= 
PLUSARGS      ?= 
VSIM_OPTIONS  ?= -vopt -voptargs='+acc' -t ps -do waves/ahb_sub.do -onfinish stop -do "set PrefSource(OpenOnFinish) 0 ; set PrefMain(LinePrefix) \"\" ; set PrefMain(colorizeTranscript) 1" -coverage
=======
TOPLEVEL      := tb_ai_accelerator
VPI_MODULES   := 
PARAMETERS    ?= 
PLUSARGS      ?= 
VSIM_OPTIONS  ?= -vopt -voptargs='+acc' -t ps -do waves/ai_accelerator.do -onfinish stop -do "set PrefSource(OpenOnFinish) 0 ; set PrefMain(LinePrefix) \"\" ; set PrefMain(colorizeTranscript) 1" -coverage
>>>>>>> dbd67e16d68f2510918970ac855df94e8f0861fc:tmp/build/u337mg096_ece337_ai_accelerator_1.0.0/sim-modelsim/Makefile
EXTRA_OPTIONS ?= $(VSIM_OPTIONS) $(addprefix -g,$(PARAMETERS)) $(addprefix +,$(PLUSARGS))

all: work $(VPI_MODULES)

run: work $(VPI_MODULES)
	$(VSIM) -c $(addprefix -pli ,$(VPI_MODULES)) $(EXTRA_OPTIONS) -do "run -all; quit -code [expr [coverage attribute -name TESTSTATUS -concise] >= 2 ? [coverage attribute -name TESTSTATUS -concise] : 0]; exit" $(TOPLEVEL)

run-gui: work $(VPI_MODULES)
	$(VSIM) -gui $(addprefix -pli ,$(VPI_MODULES)) $(EXTRA_OPTIONS) $(TOPLEVEL)

work:
	$(VSIM) -c -do "do edalize_main.tcl; exit"

clean: 
